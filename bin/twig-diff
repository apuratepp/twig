#!/usr/bin/env ruby

# Shows the diff between the given/current branch and its `diff-branch`.
#
# Subcommand for Twig: <http://rondevera.github.io/twig/>
# Author: Ron DeVera <http://rondevera.com>

branch_name =
  (ARGV.first && ARGV.first.strip) ||
  `git rev-parse --abbrev-ref HEAD`.strip # Current branch
diff_branch = `twig diff-branch -b "#{branch_name}"`.strip

puts %{Getting diff of "#{branch_name}" against "#{diff_branch}"...}
exec %{git diff "#{diff_branch}" "#{branch_name}"}
